#!/bin/bash

# Compile dynamic library
gcc -Wall -pedantic -Werror -Wextra -fPIC -shared -o libdynamic.so *.c

# Check if compilation was successful
if [ $? -eq 0 ]; then
    echo "Dynamic library compilation successful"

    # Compile main program
    gcc -Wall -pedantic -Werror -Wextra -L. 0-main.c -ldynamic -o len

    # Check if compilation was successful
    if [ $? -eq 0 ]; then
        echo "Main program compilation successful"

        # Set LD_LIBRARY_PATH temporarily for testing
        export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH

        # Run the program
        ./len

        # Clean up
        unset LD_LIBRARY_PATH
    else
        echo "Main program compilation failed"
    fi
else
    echo "Dynamic library compilation failed"
fi

